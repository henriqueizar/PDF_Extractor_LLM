Utilizei PostgreSQL em container Docker para 
simular um ambiente próximo de produção, 
ao invés de usar SQLite puro, o que poderia
gerar empecilhos futuramente.

Problema contornado: o Prisma havia gerado
URL "prisma+postgres' automaticamente, que 
não é compatível com Postgres Docker. 
Foi um problema simples, mas que me demandou
tempo na investigação, até entender o que 
estava ocorrendo de errado. Entao mudei
 para uma URL PostgreSQL padrão 
para garantir a funcionalidade.

PDFs escaneados exigem conversao 
para imagem antes do OCR.

Como o OCR oscila em termos de tempo de processamento, 
sendo um tanto imprevisível, o processamento teve de ser
feito de forma assincrona, para o cliente consultar o 
resultado somente depois de todo o OCR, evitando assim
um timeout e travamento, como estava sendo observado
antes dessa mudança, com "Error: write EOF" indicando
o fechamento da conexão.

### Processing Flow 

1. User uploads a document
2. Document is stored and marked as PENDING
3. OCR processing extracts text
4. Document status is updated to COMPLETED
5. User can ask questions about the extracted text
6. Each interaction is stored for historical tracking

### OCR

-  Image OCR is fully supported using Tesseract.js
- PDF OCR is implemented through pdf2pic conversion, and then Image OCR
- On Windows, PDF OCR requires ImageMagick/GraphicsMagick
- The PDF OCR pipeline is fully compatible with Linux environments

### PDF OCR

Although the case requires OCR for invoice images, the system was designed to also support PDF OCR.

However, PDF OCR requires native image processing binaries (GraphicsMagick/ImageMagick).

The current implementation supports PDF-to-image conversion and OCR, but on environments without these binaries, the process fails, marking the document as FAILED without crashing the system.
Image OCR works gracefully.

### LLM Interaction (OPENAI API)

The LLM integration is fully implemented..
Due to OpenAI quota limitations, a simulated response was implemented, ensuring the feature remains testable and ready for use.

And to ensure the application remains fully testable without paid API credits, the system includes graceful fallback behavior:

- If no API key is provided, return a simulated explanation
- If quota is exceeded, return and store a controlled error message is stored 